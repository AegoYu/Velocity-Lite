<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Velocity Test</title>
    <script type="text/javascript" src="/seajs/sea.js"></script>
    <link rel="stylesheet" type="text/css" href="http://static.iqiyi.com/css/20160504/h5-paopao.css">
</head>

<body>
    <script id="tmpl" type="text/tmplate">
      #foreach($item in $infos)
        #if($item.arr)
          <div>hello ${item.arr[0]}</div>
          <div>hello ${item.arr[1]}</div>
        #end
      #end
      <div class='class1 #if($bool)class2#end'>1</div>  
    </script>
    <script>
    seajs.config({
        alias: {
            'velocityjs': '/velocityjs/0.4.10/index',
            'getJson': '/paopao-data'
        }
    });

    seajs.use(["velocityjs", "getJson"], function(Velocity, json) {

        var Parser = Velocity.Parser;
        var Compile = Velocity.Compile;
        var asts = Parser.parse(document.querySelector('#tmpl').innerHTML);
        var json = {
          infos : [
            {
              name : "messi",
              arr :[1,2,3],
            },{
              name : "kaka"
            }
          ],
          bool : true
        };
        var c = new Compile(asts);
        var s = c.render(json);
        console.log(s);  
    });
    </script>
    <div class="m-box m-box-mid" id="paopao">
    </div>
</body>

</html>
